# Test Raffia task status display scenarios

# ---
# SLAM_TASKNAME: Status Test Scenarios free strategy
# SLAM_Q: [ triage, play ]
# ---

---
- hosts: "{{ NODE }}"
  strategy: free
  tasks:
    - debug: var=ansible_host

    - name: Success
      command: /bin/true

    - name: Fail
      command: /bin/false
      ignore_errors: yes

    - name: Skipped
      command: /bin/true
      when: true == false

    - name: Partial Skipped
      command: /bin/true
      when: ansible_host | search("[13579]$")

    - name: Partial Success
      command: >
        {{ (ansible_host | search("[13579]$")) | ternary('/bin/true', '/bin/false') }}
      ignore_errors: yes

    - name: Partial Success with skipped
      command: >
        {{ (ansible_host | search("[13579]$")) | ternary('/bin/true', '/bin/false') }}
      ignore_errors: yes
      when: ansible_host | search("[013-9]$")

    - name: This task deliberately has a veeeeeeeeeeeeeeeeeeery looooooooooooooooooooooooong task name to force ellipsis clipping in diagram
      command: /bin/true
